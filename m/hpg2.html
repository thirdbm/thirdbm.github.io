<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Hairy Portrait Generator II</title>
<style>
	a {	color : #aaff00; text-decoration : none; }
	body { background-color:#222222; margin-top:8px; color : #eeeeee; font-family:Verdana; font-size:16px; margin:0px; padding:0px; }
</style>
</head>
<body>
<center>
<h2>Hairy Portrait Generator II</h2>
<canvas id="canvas"></canvas><br>
<p>
<a id="btn_refresh" style="background:#ff6600; padding:10px; color:#ffffff; font-weight:bold; border:0px;">Refresh</a><br><br><br>
<a id="btn_save" download="HairyPortrait.png" style="background:#666666; padding:8px; color:#ffffff; font-weight:bold;">Save to PNG</a><br><br>
</p>
<p>Verified working browsers : Chrome(PC), Firefox(PC), Safari(iOS)</p>
<p>2015-12-04<br>
<a href="http://thirdbm.github.io">thirdbm.github.io</a>	
</p>
</center>
</body>
<script>
var
UNIT = 8,
COLS = 50,
ROWS = 40;
var cv = document.getElementById("canvas");
cv.width = ROWS * UNIT;
cv.height = COLS * UNIT;
var cx = cv.getContext("2d");
var colors = [];
var base = [];

function init() {
	base = [
		[1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,0,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,0,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,0,1,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,1,0,0, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,0, 0,1,2,3,2,3,2,3,2,3, 3,2,3,2,3,2,3,2,1,0, 0,0,0,0,0,0,0,0,0,1],

		[1,0,0,0,0,0,0,0,0,0, 1,2,3,2,3,3,3,3,3,3, 3,3,3,3,3,3,2,3,2,1, 0,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,3,3,3,3,3,3,3, 3,3,3,3,3,3,3,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,3,2,3,3,3,3,3,3, 3,3,3,3,3,3,2,3,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,3,3,3,3,3,3,2, 2,3,3,3,3,3,3,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,3,3,3,3,3,3,2,2, 2,2,3,3,3,3,3,3,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,3,3,3,3,3,3,3,3, 3,3,3,3,3,3,3,3,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,3,2,2,2,2,2,3,3, 3,3,2,2,2,2,2,3,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,1,1,1, 2,3,2,3,3,2,1,1,2,2, 2,2,1,1,2,3,3,2,3,2, 1,1,1,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,3,3,1, 3,2,3,2,1,1,1,1,1,2, 2,1,1,1,1,1,2,3,2,3, 1,3,3,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,3,3,1, 3,3,2,1,3,4,2,1,2,2, 2,2,1,2,4,3,1,2,3,3, 1,3,3,1,0,0,0,0,0,1],

		[1,0,0,0,0,0,1,1,3,1, 3,3,3,2,1,1,2,2,2,3, 3,2,2,2,1,1,2,3,3,3, 1,3,1,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,1,2,1, 3,3,3,3,3,3,3,2,2,3, 3,2,2,3,3,3,3,3,3,3, 1,2,1,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,1,2,1, 2,3,3,3,3,3,3,2,2,3, 3,2,2,3,3,3,3,3,3,2, 1,2,1,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,2,1,1, 2,2,3,3,3,3,2,3,2,3, 3,2,3,2,3,3,3,3,2,2, 1,1,2,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,2,2,1, 2,1,2,3,3,2,3,2,2,3, 3,2,2,3,2,3,3,2,1,2, 1,2,2,1,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,1,1,1, 2,2,1,2,3,3,2,1,4,2, 2,4,1,2,3,3,2,1,2,2, 1,1,1,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,1,2,3,3,3,2,1,1, 1,1,2,3,3,3,2,1,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,3,3,3,2,2,2, 2,2,2,3,3,3,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,3,3,3,2,3,2,3, 3,2,3,2,3,3,3,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,3,3,2,2,2,3, 3,2,2,2,3,3,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],

		[1,0,0,0,0,0,0,0,0,1, 2,2,2,3,3,3,1,4,1,1, 1,1,4,1,3,3,3,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,3,3,2,2,2,3, 3,2,2,2,3,3,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 1,2,2,3,3,3,3,2,2,2, 2,2,2,3,3,3,3,2,2,1, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,1,2,2,3,2,3,3,3,3, 3,3,3,3,2,3,2,2,1,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,1,2,3,2,3,2,3,3, 3,3,2,3,2,3,2,1,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,1,2,2,2,2,2,2, 2,2,2,2,2,2,1,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,1,1,1,1,1,1, 1,1,1,1,1,1,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,2,2,2,3,3,3, 3,3,3,2,2,2,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,3,2,3,2,3,3, 3,3,2,3,2,3,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],

		[1,0,0,0,0,0,0,0,0,1, 2,2,2,2,2,2,2,3,2,3, 3,2,3,2,2,2,2,2,2,2, 1,0,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,1,2, 2,2,2,2,3,2,3,2,3,2, 2,3,2,3,2,3,2,2,2,2, 2,1,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,0,1,2, 2,2,2,2,2,2,2,3,2,3, 3,2,3,2,2,2,2,2,2,2, 2,1,0,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,0,1,2,2, 2,2,2,2,2,2,3,2,3,2, 2,3,2,3,2,2,2,2,2,2, 2,2,1,0,0,0,0,0,0,1],
		[1,0,0,0,0,0,1,2,2,2, 2,2,2,2,2,2,2,2,2,3, 3,2,2,2,2,2,2,2,2,2, 2,2,2,1,0,0,0,0,0,1],
		[1,0,0,0,1,1,2,2,2,2, 2,2,2,2,2,2,2,2,3,2, 2,3,2,2,2,2,2,2,2,2, 2,2,2,2,1,1,0,0,0,1],
		[1,0,1,1,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,1,1,0,1],
		[1,1,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,1,1],
		[1,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,2, 2,2,2,2,2,2,2,2,2,1],
		[1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1],
	];
}

var hairSet = [
	[],
	[
		[5,1,2],[6,1,2],[7,1,2],[8,1,2],
	],
	[
		[2,1,1],[2,3,1],[2,5,1],[2,7,1],[2,9,1],[3,1,10],[4,1,11],[5,1,11],[6,1,11],[7,1,11], [8,1,2],[8,8,4],
		[9,9,3],[10,10,2],[11,10,2],[12,10,2],[13,10,2],[14,10,2],[15,10,2],[16,10,2],
	],
	[
		[12,11,2],[13,11,2],[14,11,3],[15,11,3],[16,11,3],
	],
	[
		[6,1,4],[7,1,7],[8,1,3],[8,8,1],[9,1,2],[9,9,1],[10,10,1],[11,9,3],[12,9,3],[13,9,3],[14,10,2],[15,11,1],[16,11,1],
	],
	[
		[5,1,6],[6,1,7],[7,1,8],[8,1,9],[9,2,9],[10,2,10],[11,2,11],[12,2,11],[13,2,11],[14,2,11],[15,2,1],[15,4,1],[15,6,1],[15,8,1],[15,10,3],[16,10,3],
	],
];

var mustachSet = [
	[],
	[
		[27,1,1],[28,1,1],
	],
	[
		[27,2,2],[28,1,4],[29,2,4],[30,4,2],[31,5,1],
	],
	[
		[27,1,3],[27,6,1], [28,1,4],[28,7,1], [29,1,6],
	],
	[
		[27,2,1],[28,2,1],[29,2,4],[30,4,2],[31,4,3],[32,4,3],[33,4,3],[34,4,3],[35,4,3],
	],
	[
		[26,7,1],[27,1,6],[28,1,4],[29,1,2],
	],
];

var beardSet = [
	[],
	[
		[32,1,1],[33,1,1],
	],
	[
		[32,1,1],[33,1,1],[34,1,1],[35,1,1],
	],
	[
		[32,1,2],[33,1,1],[34,1,1],[34,3,1],[35,1,4],[36,1,5],[37,1,4],[38,1,3],[39,1,2],[40,1,2],[41,1,1],[42,1,1],
	],
	[
		[32,1,2],[32,5,1], [33,1,1],[33,5,1], [34,4,2],[35,3,3],[36,1,5],[37,1,4],
	],
	[
		[31,10,1],[32,9,2],[33,7,4],[34,5,5],[35,4,6],[36,4,5],[37,4,4],[38,4,3],[39,4,2],
	],
	[
		[31,10,1],[32,1,2],[32,9,2],[33,1,1],[33,7,4],[34,5,5],[35,1,9],[36,1,8],[37,1,7],[38,1,6],[39,1,5],[40,1,3],
	],
	[
		[29,10,1],[30,8,3],[31,5,7],[32,1,10],[33,1,2],[33,4,8],[34,1,1],[34,3,9],[35,1,9],[36,1,8],[36,10,1],[37,1,7],[37,9,1],[37,11,1],[38,1,6],[38,8,1],[38,10,1],[39,1,5],[39,7,1],[39,9,1],[40,1,2],[40,4,1],[40,6,1],[41,1,1],[41,3,1],[41,5,1],[42,2,1],
	],
];

var sideburnsSet = [
	[],
	[
		[17,11,1],[18,11,1],[19,11,1],[20,11,1],[21,11,1],
	],
	[
		[17,11,1],[18,11,1],[19,11,1],[20,11,1],[21,11,1],[22,11,1],[23,11,1],[24,11,1],[25,10,2],[26,10,2],[27,10,2],[28,10,2],[29,9,3],[30,9,3],[31,8,4],[32,8,4],[33,8,2],[34,8,1],
	],
	[
		[17,11,1],[18,11,1],[19,11,1],[20,11,2],[21,11,2],[22,11,2],[23,10,3],[24,10,3],[25,9,3],[26,9,2],[27,7,3],
	],
];

var eyebrowSet = [
	[],
	[
		[16,3,5],[17,2,4],[17,8,1],
	],
	[
		[16,2,4],[17,2,6],[18,8,1],
	],
	[
		[16,6,2],[17,3,3],[18,2,3],
	],
];

function rollTheSet(name) {
	var size = dice(0, name.length);
	for( var i = 0 ; i < name[size].length ; i ++ ) {
		dr( name[size][i][0] , name[size][i][1] , name[size][i][2] )
	}
}

function dr(startY,startX,size){
	var centerX = ROWS/2;
	for(var i=0; i<size; i++){
		base[startY][(centerX-startX)-i] = 5;
		base[startY][((centerX-1)+startX)+i] = 5;
	}
}

function box(color, x, y) {
	cx.beginPath();
	cx.rect(x, y, UNIT, UNIT);
	cx.fillStyle = color;
	cx.fill();
	cx.lineWidth = 1;
	cx.strokeStyle = "rgba(0,0,0,0.1)";
	cx.stroke();
	//cx.fillStyle = color;
	//cx.fillRect(x, y, UNIT, UNIT);
}

function dice(min, max) {
	return Math.floor( Math.random() * (max - min) + min );
}

function execute() {
	init();

	cx.clearRect(0, 0, cv.width, cv.height);

	colors[0] = null;
	colors[1] = "rgb("+ dice(20,120) +","+ dice(20,120) +","+ dice(20,120)+")";
	colors[2] = "rgb("+ dice(50,200) +","+ dice(50,200) +","+ dice(50,200)+")";
	colors[3] = "rgb("+ dice(150,254) +","+ dice(150,254) +","+ dice(150,254)+")";
	colors[4] = "rgb("+ dice(10,100) +","+ dice(10,100) +","+ dice(10,100)+")";
	colors[5] = "rgb("+ dice(0,255) +","+ dice(0,255) +","+ dice(0,255)+")"; 

	rollTheSet(hairSet);
	rollTheSet(mustachSet);
	rollTheSet(beardSet);
	rollTheSet(sideburnsSet);
	rollTheSet(eyebrowSet);

	for (var y = 0; y < base.length; y++){
	for (var x = 0; x < base[y].length; x++) {

		var d1 = dice(220,240);
		var rgb = "rgb("+ d1 +","+ d1 +","+ d1+")";

		if (base[y][x] == 0) { box(rgb, x *UNIT, y *UNIT); }
		else if (base[y][x] == 1) { box(colors[1], x *UNIT, y *UNIT); }
		else if (base[y][x] == 2) { box(colors[2], x *UNIT, y *UNIT); }
		else if (base[y][x] == 3) { box(colors[3], x *UNIT, y *UNIT); }
		else if (base[y][x] == 4) { box(colors[4], x *UNIT, y *UNIT); }
		else if (base[y][x] == 5) { box(colors[5], x *UNIT, y *UNIT); }
	}
	}
}

btn_refresh.addEventListener("click", execute, false);
btn_save.addEventListener("click", function(){
	this.href = cv.toDataURL("image/png");;
}, false);

window.addEventListener("load",execute,false);
</script>
</html>